# Nome do Workflow que aparecerá na aba "Actions" do GitHub
name: Compilar APK Android

# Define quando o workflow deve ser executado
on:
  # Executa em cada push para o branch 'master'
  push:
    branches: [ "master" ]
  # Permite que você execute este workflow manualmente na aba Actions
  workflow_dispatch:

# Define os trabalhos (jobs) a serem executados
jobs:
  build:
    # O tipo de máquina virtual para executar o trabalho
    runs-on: ubuntu-latest

    steps:
      # 1. Baixa o código do seu repositório
      - name: Checkout do código
        uses: actions/checkout@v4

      # 2. Configura o JDK (Java Development Kit). Este projeto parece ser antigo,
      # então Java 11 é uma boa escolha. Se falhar, tente com '8'.
      - name: Set up JDK 11
        uses: actions/setup-java@v4
        with:
          java-version: '11'
          distribution: 'temurin'
          cache: gradle

      # 3. Dá permissão de execução para o Gradle Wrapper
      # (Necessário em ambientes Linux/macOS)
      - name: Dar permissão de execução ao gradlew
        run: chmod +x ./gradlew

      # 4. Compila o APK de depuração (debug)
      # Usamos ":appnes:assembleDebug" para especificar que queremos compilar
      # apenas o módulo 'appnes' no modo de depuração.
      - name: Compilar com Gradle
        run: ./gradlew :appnes:assembleDebug

      # 5. Faz o upload do APK gerado como um artefato
      # Você poderá baixar este arquivo na página de resumo do workflow.
      - name: Upload do APK
        uses: actions/upload-artifact@v4
        with:
          name: NostalgiaLite-debug.apk
          path: appnes/build/outputs/apk/debug/appnes-debug.apk
